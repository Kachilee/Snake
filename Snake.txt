import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24zCiMtKi1jb2Rpbmc6dXRmLTgtKi0KIyBNYWRlIFdpdGgg4p2k77iPIEJ5IEZhaGltWEQKIyBUaGFua3MgVG8gTWUKIyBUaGFua3MgVG8gQWxsIE15IEZyaWVuZHMKIyBQbGVhc2UgRG9uJ3QgUmVjb2RlLCBUaGFua3MuCgppbXBvcnQgcmVxdWVzdHMsbWVjaGFuaXplLGJzNCxzeXMsb3Msc3VicHJvY2Vzcyx1dWlkLHJhbmRvbSx0aW1lLHJlLGJhc2U2NCxjb25jdXJyZW50LmZ1dHVyZXMsanNvbgpmcm9tIHJhbmRvbSBpbXBvcnQgcmFuZGludApmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBvcnQgVGhyZWFkUG9vbEV4ZWN1dG9yIGFzIFRocmVhZFBvb2wKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQpjdXJyZW50ID0gZGF0ZXRpbWUubm93KCkKCnAgPSAiXHgxYlswOzM3bSIgIyBwdXRpaAptID0gIlx4MWJbMDszMW0iICMgbWVyYWgKaCA9ICJceDFiWzA7MzJtIiAjIGhpamF1CmsgPSAiXHgxYlswOzMzbSIgIyBrdW5pbmcKYiA9ICJceDFiWzA7MzRtIiAjIGJpcnUKdSA9ICJceDFiWzA7MzVtIiAjIHVuZ3UKbyA9ICJceDFiWzA7MzZtIiAjIGJpcnUgbXVkYQoKaWYgKCJsaW51eCIgaW4gc3lzLnBsYXRmb3JtLmxvd2VyKCkpOgoKICAgICAgICBOID0gIlwwMzNbMG0iCiAgICAgICAgRyA9ICJcMDMzWzE7OTJtIgogICAgICAgIE8gPSAiXDAzM1sxOzk3bSIKICAgICAgICBSID0gIlwwMzNbMTs5MW0iCmVsc2U6CgogICAgICAgIE4gPSAiIgogICAgICAgIEcgPSAiIgogICAgICAgIE8gPSAiIgogICAgICAgIFIgPSAiIgoKIyMjIEhFQURFUlMgIyMjCgpkZWYgYmFubmVyKCk6CiAgICBwcmludCgiIiIgICAKXDAzM1swOzMxbS4jIy4uLi4jIy4uLi4jIyMuLi4uLiMjIyMjIy4uIyMuLi4uLiMjLiMjIyMKXDAzM1swOzM1bS4jIy4uLiMjLi4uLiMjLiMjLi4uIyMuLi4uIyMuIyMuLi4uLiMjLi4jIy4KXDAzM1swOzM2bS4jIy4uIyMuLi4uIyMuLi4jIy4uIyMuLi4uLi4uIyMuLi4uLiMjLi4jIy4KXDAzM1swOzM0bS4jIyMjIy4uLi4jIy4uLi4uIyMuIyMuLi4uLi4uIyMjIyMjIyMjLi4jIy4KXDAzM1swOzM3bS4jIy4uIyMuLi4jIyMjIyMjIyMuIyMuLi4uLi4uIyMuLi4uLiMjLi4jIy4KXDAzM1swOzMzbS4jIy4uLiMjLi4jIy4uLi4uIyMuIyMuLi4uIyMuIyMuLi4uLiMjLi4jIy4KXDAzM1swOzMybS4jIy4uLi4jIy4jIy4uLi4uIyMuLiMjIyMjIy4uIyMuLi4uLiMjLiMjIyMKXDAzM1szNzsxbVtcMDMzWzQxOzFtIEZBQ0VCT09LIEFDQ09VTlQgQ0xPTklORyBcMDMzWzAwOzFtXDAzM1szNzsxbSBdXG4KXDAzM1sxOzM3OzQwbeKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkApcMDMzWzE7Mzc7NDBt4pSCIMKuIFNjcmlwdCBCeSBLYWNoaSDCriB8ClwwMzNbMTszNzs0MG3ilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJgKXDAzM1szNzsxbVtcMDMzWzQxOzFtIElGIFlPVSBXQU4gTUFLRSBBTSBGT1IgTElGRSBCRSBIVU1CTEUgXDAzM1swMDsxbVwwMzNbMzc7MW0gXVxuClwwMzNbMzI7MW1WZXJzaW9uXDAzM1szNzsxbTpcMDMzWzMzOzFtMS4wIiIiKQoKaG9zdD0iaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIgppcHM9Tm9uZQp0cnk6CgliPXJlcXVlc3RzLmdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbi8iKS5qc29uKClbInF1ZXJ5Il0KCWlwcz1yZXF1ZXN0cy5nZXQoImh0dHA6Ly9pcC1hcGkuY29tL2pzb24vIitiLGhlYWRlcnM9eyJSZWZlcmVyIjoiaHR0cDovL2lwLWFwaS5jb20vIiwiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsIlVzZXItQWdlbnQiOiJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTQuMC40NjA2LjgxIFNhZmFyaS81MzcuMzYgRWRnLzk0LjAuOTkyLjUwIn0pLmpzb24oKVsiY291bnRyeSJdLmxvd2VyKCkKZXhjZXB0OgoJaXBzPU5vbmUKCm9rID0gW10KY3AgPSBbXQp0dGwgPVtdCgpkdXJhc2kgPSBzdHIoZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVkLSVtLSVZIikpCnRhaHVuID0gY3VycmVudC55ZWFyCmJ1bGFuID0gY3VycmVudC5tb250aApoYXJpID0gY3VycmVudC5kYXkKCmRlZiBqYWxhbih6KToKCWZvciBlIGluIHogKyAiXG4iOgoJCXN5cy5zdGRvdXQud3JpdGUoZSkKCQlzeXMuc3Rkb3V0LmZsdXNoKCkKCQl0aW1lLnNsZWVwKDAuMDMpCgpkZWYgY2xlYXIoKToKCWlmICIgbGludXgiIGluIHN5cy5wbGF0Zm9ybS5sb3dlcigpOgoJCW9zLnN5c3RlbSgiY2xlYXIiKQoJZWxpZiAid2luIiBpbiBzeXMucGxhdGZvcm0ubG93ZXIoKToKCQlvcy5zeXN0ZW0oImNscyIpCgllbHNlOm9zLnN5c3RlbSgiY2xlYXIiKQogICAgCmRlZiBsYW5nKGNvb2tpZXMpOgoJZj1GYWxzZQoJcnI9YnM0LkJlYXV0aWZ1bFNvdXAocmVxdWVzdHMuZ2V0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbGFuZ3VhZ2UucGhwIixoZWFkZXJzPWhkY29rKCksY29va2llcz1jb29raWVzKS50ZXh0LCJodG1sLnBhcnNlciIpCglmb3IgaSBpbiByci5maW5kX2FsbCgiYSIsaHJlZj1UcnVlKToKCQlpZiAiaWRfSUQiIGluIGkuZ2V0KCJocmVmIik6CgkJCXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tLyIraS5nZXQoImhyZWYiKSxjb29raWVzPWNvb2tpZXMsaGVhZGVycz1oZGNvaygpKQoJCQliPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwIixoZWFkZXJzPWhkY29rKCksY29va2llcz1jb29raWVzKS50ZXh0CQoJCQlpZiAiYXBhIHlhbmcgYW5kYSBwaWtpcmthbiBzZWthcmFuZyIgaW4gYi5sb3dlcigpOgoJCQkJZj1UcnVlCglpZiBmPT1UcnVlOgoJCXJldHVybiBUcnVlCgllbHNlOgoJCWV4aXQoIlshXSBXcm9uZyBDb29raWVzIikKCmRlZiBiYXNlY29va2llKCk6CglpZiBvcy5wYXRoLmV4aXN0cygiLmNvayIpOgoJCWlmIG9zLnBhdGguZ2V0c2l6ZSgiLmNvayIpICE9MDoKCQkJcmV0dXJuIGdldHNfZGljdF9jb29raWVzKG9wZW4oJy5jb2snKS5yZWFkKCkuc3RyaXAoKSkKCQllbHNlOmxvZ3MoKQoJZWxzZTpsb2dzKCkKCmRlZiBoZGNvaygpOgoJZ2xvYmFsIGhvc3QKCWhvc3RzPWhvc3QKCXI9eyJvcmlnaW4iOiBob3N0cywgImFjY2VwdC1sYW5ndWFnZSI6ICJpZC1JRCxpZDtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNyIsICJhY2NlcHQtZW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsICJhY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCIsICJ1c2VyLWFnZW50IjogIk1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgTWkgOVQgUHJvIEJ1aWxkL1FLUTEuMTkwODI1LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS84OC4wLjQzMjQuMTgxIE1vYmlsZSBTYWZhcmkvNTM3LjM2W0ZCQU4vRU1BO0ZCTEMvaXRfSVQ7RkJBVi8yMzkuMC4wLjEwLjEwOTtdIiwgIkhvc3QiOiAiIi5qb2luKGJzNC5yZS5maW5kYWxsKCI6Ly8oLio/KSQiLGhvc3RzKSksICJyZWZlcmVyIjogaG9zdHMrIi9sb2dpbi8/bmV4dCZyZWY9ZGJsJmZsJnJlZmlkPTgiLCAiY2FjaGUtY29udHJvbCI6ICJtYXgtYWdlPTAiLCAidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6ICIxIiwgImNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifQoJcmV0dXJuIHIKCmRlZiBnZXRzX2Nvb2tpZXMoY29va2llcyk6CglyZXN1bHQ9W10KCWZvciBpIGluIGVudW1lcmF0ZShjb29raWVzLmtleXMoKSk6CgkJaWYgaVswXT09bGVuKGxpc3QoY29va2llcy5rZXlzKCkpKS0xOnJlc3VsdC5hcHBlbmQoaVsxXSsiPSIrY29va2llc1tpWzFdXSkKCQllbHNlOnJlc3VsdC5hcHBlbmQoaVsxXSsiPSIrY29va2llc1tpWzFdXSsiOyAiKQoJcmV0dXJuICIiLmpvaW4ocmVzdWx0KQoKZGVmIGdldHNfZGljdF9jb29raWVzKGNvb2tpZXMpOgoJcmVzdWx0PXt9Cgl0cnk6CgkJZm9yIGkgaW4gY29va2llcy5zcGxpdCgiOyIpOgoJCQlyZXN1bHQudXBkYXRlKHtpLnNwbGl0KCI9IilbMF06aS5zcGxpdCgiPSIpWzFdfSkKCQlyZXR1cm4gcmVzdWx0CglleGNlcHQ6CgkJZm9yIGkgaW4gY29va2llcy5zcGxpdCgiOyAiKToKCQkJcmVzdWx0LnVwZGF0ZSh7aS5zcGxpdCgiPSIpWzBdOmkuc3BsaXQoIj0iKVsxXX0pCgkJcmV0dXJuIHJlc3VsdAoKIyMjIExPR0lOIE1FVEhPREUgIyMjCgpkZWYgbG9ncygpOgogIG9zLnN5c3RlbSgiY2xlYXIiKQogIGJhbm5lcigpCiAgcHJpbnQoKGsrIlxuWyIrcCsiMSIraysiXSIrcCsiIExvZ2luIFdpdGggVG9rZW4iKSkKICBwcmludCgoaysiWyIrcCsiMiIraysiXSIrcCsiIExvZ2luIFdpdGggQ29va2llcyIpKQogIHByaW50KChrKyJbIitwKyIwIitrKyJdIitwKyIgRXhpdCIpKQogIHNlaz1pbnB1dChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENob29zZSA6ICIpCiAgaWYgc2VrPT0iIjoKICAgIHByaW50KChrKyJcblsiK3ArIiEiK2srIl0iK3ArIiBGaWxsIEluIFRoZSBDb3JyZWN0IikpCiAgICBsb2dzKCkKICBlbGlmIHNlaz09IjEiOgogICAgbG9nX3Rva2VuKCkKICBlbGlmIHNlaz09IjIiOgogICAgZ2VuKCkKICBlbGlmIHNlaz09IjAiOgogICAgZXhpdCgpCiAgZWxzZToKICAgIHByaW50KChrKyJcblsiK3ArIiEiK2srIl0iK3ArIiBGaWxsIEluIFRoZSBDb3JyZWN0IikpCiAgICBsb2dzKCkKCmRlZiBsb2dfdG9rZW4oKToKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgYmFubmVyKCkKICAgIHRva2V0ID0gaW5wdXQoaysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBUb2tlbiA6ICIpCiAgICB0cnk6CiAgICAgICAgb3R3ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZT9hY2Nlc3NfdG9rZW49IiArIHRva2V0KQogICAgICAgIGEgPSBqc29uLmxvYWRzKG90dy50ZXh0KQogICAgICAgIG5hbWEgPSBhWyJuYW1lIl0KICAgICAgICB6ZWRkID0gb3BlbigibG9naW4udHh0IiwgInciKQogICAgICAgIHplZGQud3JpdGUodG9rZXQpCiAgICAgICAgemVkZC5jbG9zZSgpCiAgICAgICAgcHJpbnQoKGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgTG9naW4gU3VjY2Vzc2Z1bCIpKQogICAgICAgIGJvdF9mb2xsb3coKQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIHByaW50KChrKyJbIitwKyIhIitrKyJdIitwKyIgVG9rZW4gSW52YWxpZCIpKQogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIGxvZ3MoKQoKZGVmIGdlbigpOgogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgICAgIGJhbm5lcigpCiAgICAgICAgY29va2llID0gaW5wdXQoaysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBDb29raWVzIDogIikKICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL20uZmFjZWJvb2suY29tL2NvbXBvc2VyL29jZWxvdC9hc3luY19sb2FkZXIvP3B1Ymxpc2hlcj1mZWVkI189XyIsIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAidXNlci1hZ2VudCIgICAgICAgICAgICAgICAgOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzk0LjAuNDYwNi44MSBTYWZhcmkvNTM3LjM2IEVkZy85NC4wLjk5Mi41MCIsICMgSmFuZ2FuIERpIEdhbnRpIEVhIEFuamluay4KICAgICAgICAgICAgICAgICJyZWZlcmVyIiAgICAgICAgICAgICAgICAgICA6ICJodHRwczovL20uZmFjZWJvb2suY29tLyIsCiAgICAgICAgICAgICAgICAiaG9zdCIgICAgICAgICAgICAgICAgICAgICAgOiAibS5mYWNlYm9vay5jb20iLAogICAgICAgICAgICAgICAgIm9yaWdpbiIgICAgICAgICAgICAgICAgICAgIDogImh0dHBzOi8vbS5mYWNlYm9vay5jb20iLAogICAgICAgICAgICAgICAgInVwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMiIDogIjEiLAogICAgICAgICAgICAgICAgImFjY2VwdC1sYW5ndWFnZSIgICAgICAgICAgIDogImlkLUlELGlkO3E9MC45LGVuLVVTO3E9MC44LGVuO3E9MC43IiwKICAgICAgICAgICAgICAgICJjYWNoZS1jb250cm9sIiAgICAgICAgICAgICA6ICJtYXgtYWdlPTAiLAogICAgICAgICAgICAgICAgImFjY2VwdCIgICAgICAgICAgICAgICAgICAgIDogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLAogICAgICAgICAgICAgICAgImNvbnRlbnQtdHlwZSIgICAgICAgICAgICAgIDogInRleHQvaHRtbDsgY2hhcnNldD11dGYtOCIKICAgICAgICAgICAgICAgIH0sIGNvb2tpZXMgPSB7CiAgICAgICAgICAgICAgICAiY29va2llIiAgICAgICAgICAgICAgICAgICAgOiBjb29raWUKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBmaW5kX3Rva2VuID0gcmUuc2VhcmNoKCIoRUFBQVx3KykiLCBkYXRhLnRleHQpCiAgICAgICAgICAgICAgICBoYXNpbCAgICA9ICJcbiogRmFpbCA6IG1heWJlIHlvdXIgY29va2llIGludmFsaWQgISEiIGlmIChmaW5kX3Rva2VuIGlzIE5vbmUpIGVsc2UgIlxuKiBZb3VyIGZiIGFjY2VzcyB0b2tlbiA6ICIgKyBmaW5kX3Rva2VuLmdyb3VwKDEpCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICAgICAgICAgICAgcHJpbnQoKGsrIlsiK3ArIiEiK2srIl0iK3ArIiBObyBDb25uZWN0aW9uIikpCiAgICAgICAgY29va2llID0gb3BlbigibG9naW4udHh0IiwgInciKQogICAgICAgIGNvb2tpZS53cml0ZShmaW5kX3Rva2VuLmdyb3VwKDEpKQogICAgICAgIGNvb2tpZS5jbG9zZSgpCiAgICAgICAgcHJpbnQoKGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgTG9naW4gU3VjY2Vzc2Z1bCIpKQogICAgICAgIGJvdF9mb2xsb3coKQoKIyMjIEJPVCBGT0xMT1cgIyMjIEphbmdhbiBEaWdhbnRpIEFuamluZyAhISEKCmRlZiBib3RfZm9sbG93KCk6Cgl0cnk6CgkJdG9rZXQ9b3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJcHJpbnQoKGsrIlxuWyIrcCsiISIraysiXSIrcCsiIFRva2VuIEludmFsaWQiKSkKCQlsb2dzKCkKCWtvbSA9ICgiIOKdpO+4j+KdpO+4j+KdpO+4j+KdpO+4j+KdpO+4jyIpCglyZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDAwNjE5Njg1NDM5NzYvc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPScgKyB0b2tldCkgI09rb3JvIE9ueWVkaWthY2hpIFByb3NwZXIKCXJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMDAwNDQxMjUyNjMwOS9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2V0KSAjQ29ybmVsaXVzIENoaW5lZHVtIFN1bmRheQoJcmVxdWVzdHMucG9zdCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vMTkwMTY5MzgzMDU4Njc5L2NvbW1lbnRzLz9tZXNzYWdlPScgK3Rva2V0KyAnJmFjY2Vzc190b2tlbj0nICsgdG9rZXQpCglyZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xODc0NzQxMzM2MDE2MjY2L2NvbW1lbnRzLz9tZXNzYWdlPScgK2tvbSsgJyZhY2Nlc3NfdG9rZW49JyArIHRva2V0KQoJbWVudSgpCgojIyMgTUFJTiBNRU5VICMjIwoKZGVmIG1lbnUoKToKICAgIHRyeToKICAgICAgICB0b2tldCA9IG9wZW4oImxvZ2luLnR4dCIsInIiKS5yZWFkKCkKICAgICAgICBvdHcgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lLz9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgICBhID0ganNvbi5sb2FkcyhvdHcudGV4dCkKICAgICAgICBuYW1hID0gYVsibmFtZSJdCiAgICAgICAgaWQgPSBhWyJpZCJdCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEVycm9yIDogJXMiJWUpKQogICAgICAgIGxvZ3MoKQogICAgaXAgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vYXBpLmlwaWZ5Lm9yZyIpLnRleHQKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgYmFubmVyKCkKICAgIHByaW50KChrKyJcblsgIitwKyJXZWxjb21lICIrYVsibmFtZSJdK2srIiBdIitwKSkKICAgIHByaW50KChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIFlvdXIgSUQgOiAiK2lkKSkKICAgIHByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBZb3VyIElQIDogIitpcCkpCiAgICBwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgU3RhdHVzICA6ICIraysiSW4gRGV2ZWxvcG1lbnQiK3ApKQogICAgcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEpvaW5lZCAgOiAiK2R1cmFzaSkpCiAgICBwcmludCgoaysiXG5bIitwKyIxIitrKyJdIitwKyIgQ3JhY2sgSUQgRnJvbSBQdWJsaWMvRnJpZW5kIikpCiAgICBwcmludCgoaysiWyIrcCsiMiIraysiXSIrcCsiIENyYWNrIElEIEZyb20gRm9sbG93ZXJzIikpCiAgICBwcmludCgoaysiWyIrcCsiMyIraysiXSIrcCsiIENyYWNrIElEIEZyb20gUG9zdCBMaWtlcyIpKQogICAgcHJpbnQoKGsrIlsiK3ArIjQiK2srIl0iK3ArIiBDcmFjayBCeSBQaG9uZSBOdW1iZXIiKSkKICAgIHByaW50KChrKyJbIitwKyI1IitrKyJdIitwKyIgQ3JhY2sgQnkgRW1haWwiKSkKICAgIHByaW50KChrKyJbIitwKyI2IitrKyJdIitwKyIgR2V0IERhdGEgVGFyZ2V0IikpCiAgICBwcmludCgoaysiWyIrcCsiNyIraysiXSIrcCsiIFJlc3VsdCBDcmFjayIpKQogICAgcHJpbnQoKGsrIlsiK3ArIjAiK2srIl0iK3ArIiBMb2dvdXQiKSkKICAgIGNob29zZV9tZW51KCkKCmRlZiBjaG9vc2VfbWVudSgpOgoJcj1pbnB1dChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENob29zZSA6ICIpCglpZiByPT0iIjoKCQlwcmludCgoaysiWyIrcCsiISIraysiXSIrcCsiIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkKCQltZW51KCkKCWVsaWYgcj09IjEiOgoJCXB1YmxpaygpCgllbGlmIHI9PSIyIjoKCQlmb2xsb3coKQoJZWxpZiByPT0iMyI6CgkJbGlrZXJzKCkKCWVsaWYgcj09IjQiOgoJCXJhbmRvbV9udW1iZXJzKCkKCWVsaWYgcj09IjUiOgoJCXJhbmRvbV9lbWFpbCgpCgllbGlmIHI9PSI2IjoKCQl0YXJnZXQoKQoJZWxpZiByPT0iNyI6CgkJcmVzcygpCgllbGlmIHI9PSIwIjoKCQl0cnk6CgkJCWphbGFuKGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgVGhhbmtzIEZvciBVc2luZyBNeSBTY3JpcHQiKQoJCQlvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi50eHQiKQoJCQlleGl0KCkKCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCXByaW50KChrKyJbIitwKyIhIitrKyJdIitwKyIgRXJyb3IgJXMiJWUpKQoJZWxzZToKCQlwcmludCgoaysiWyIrcCsiISIraysiXSIrcCsiIFdyb25nIElucHV0IikpCgkJbWVudSgpCQoKZGVmIHBpbGloY3JhY2soZmlsZSk6CiAgcHJpbnQoKGsrIlxuWyIrcCsiMSIraysiXSIrcCsiIE1iYXNpYyAoIitoKyJSZWNvbW1lbmRlZCIrcCsiKSIpKQogIHByaW50KChrKyJbIitwKyIyIitrKyJdIitwKyIgTWJhc2ljICsgVFRMIikpCiAga3JhaD1pbnB1dChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENob29zZSA6ICIpCiAgaWYga3JhaCBpblsiIl06CiAgICBwcmludCgoaysiWyIrcCsiISIraysiXSIrcCsiIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkKICAgIHBpbGloY3JhY2soZmlsZSkKICBlbGlmIGtyYWggaW5bIjEiLCIwMSJdOgogICAgY3JhY2soZmlsZSkKICBlbGlmIGtyYWggaW5bIjIiLCIwMiJdOgogICAgY3JhY2t0dGwoZmlsZSkKICBlbHNlOgogICAgcHJpbnQoKGsrIlsiK3ArIiEiK2srIl0iK3ArIiBGaWxsIEluIFRoZSBDb3JyZWN0IikpCiAgICBwaWxpaGNyYWNrKGZpbGUpCgojIyMgRFVNUCBJRCAjIyMKCmRlZiBwdWJsaWsoKToKCXRyeToKCQl0b2tldD1vcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpCglleGNlcHQgSU9FcnJvcjoKCQlwcmludCgoaysiXG5bIitwKyIhIitrKyJdIitwKyIgQ29va2llL1Rva2VuIEludmFsaWQiKSkKCQlvcy5zeXN0ZW0oInJtIC1yZiBsb2dpbi50eHQiKQoJCWxvZ3MoKQoJdHJ5OgoJCXByaW50KChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIFR5cGUgXCdtZVwnIFRvIER1bXAgRnJvbSBGcmllbmRsaXN0IikpCgkJaWR0ID0gaW5wdXQoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgVXNlciBJRCBUYXJnZXQgOiAiKQoJCXRyeToKCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQlvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCgkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBOYW1lIDogIitvcFsibmFtZSJdKSkKCQlleGNlcHQgS2V5RXJyb3I6CgkJCXByaW50KChrKyJbIitwKyIhIitrKyJdIitwKyIgSUQgTm90IEZvdW5kIikpCgkJCXByaW50KChrKyJcblsgIitwKyJCYWNrIitrKyIgXSIrcCkpCgkJCXB1YmxpaygpCgkJcj1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyIvZnJpZW5kcz9saW1pdD0xMDAwMCZhY2Nlc3NfdG9rZW49Iit0b2tldCkKCQlpZCA9IFtdCgkJej1qc29uLmxvYWRzKHIudGV4dCkKCQlxcSA9IChvcFsiZmlyc3RfbmFtZSJdKyIuanNvbiIpLnJlcGxhY2UoIiAiLCJfIikKCQl5cyA9IG9wZW4ocXEgLCAidyIpIy5yZXBsYWNlKCIgIiwiXyIpCgkJZm9yIGEgaW4gelsiZGF0YSJdOgoJCQlpZC5hcHBlbmQoYVsiaWQiXSsiPD0+IithWyJuYW1lIl0pCgkJCXlzLndyaXRlKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKyJcbiIpCgkJeXMuY2xvc2UoKQoJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBUb3RhbCBJRCA6ICVzIiUobGVuKGlkKSkpKQoJCXJldHVybiBwaWxpaGNyYWNrKHFxKQoJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCWV4aXQoaysiWyIrcCsiISIraysiXSIrcCsiIEVycm9yIDogJXMiJWUpCgpkZWYgZm9sbG93KCk6Cgl0cnk6CgkJdG9rZXQ9b3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKQoJZXhjZXB0IElPRXJyb3I6CgkJcHJpbnQoKGsrIlxuWyIrcCsiISIraysiXSIrcCsiIENvb2tpZS9Ub2tlbiBJbnZhbGlkIikpCgkJb3Muc3lzdGVtKCJybSAtcmYgbG9naW4udHh0IikKCQlsb2dzKCkKCXRyeToKCQlpZHQgPSBpbnB1dChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIEZvbGxvd2VycyBJRCBUYXJnZXQgOiAiKQoJCXRyeToKCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQlvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCgkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBOYW1lIDogIitvcFsibmFtZSJdKSkKCQlleGNlcHQgS2V5RXJyb3I6CgkJCXByaW50KChrKyJbIitwKyIhIitrKyJdIitwKyIgSUQgTm90IEZvdW5kIikpCgkJCXByaW50KChrKyJcblsgIitwKyJCYWNrIitrKyIgXSIrcCkpCgkJCXB1YmxpaygpCgkJcj1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyIvc3Vic2NyaWJlcnM/bGltaXQ9MjAwMDAmYWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJaWQgPSBbXQoJCXo9anNvbi5sb2FkcyhyLnRleHQpCgkJcXEgPSAob3BbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCgkJeXMgPSBvcGVuKHFxICwgInciKSMucmVwbGFjZSgiICIsIl8iKQoJCWZvciBhIGluIHpbImRhdGEiXToKCQkJaWQuYXBwZW5kKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKQoJCQl5cy53cml0ZShhWyJpZCJdKyI8PT4iK2FbIm5hbWUiXSsiXG4iKQoJCXlzLmNsb3NlKCkKCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgVG90YWwgSUQgOiAlcyIlKGxlbihpZCkpKSkKCQlyZXR1cm4gcGlsaWhjcmFjayhxcSkKCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQlleGl0KGsrIlsiK3ArIiEiK2srIl0iK3ArIiBFcnJvciA6ICVzIiVlKQoKZGVmIGxpa2VycygpOgoJdHJ5OgoJCXRva2V0PW9wZW4oImxvZ2luLnR4dCIsInIiKS5yZWFkKCkKCWV4Y2VwdCBJT0Vycm9yOgoJCXByaW50KChrKyJcblsiK3ArIiEiK2srIl0iK3ArIiBDb29raWUvVG9rZW4gSW52YWxpZCIpKQoJCW9zLnN5c3RlbSgicm0gLXJmIGxvZ2luLnR4dCIpCgkJbG9ncygpCgl0cnk6CgkJaWR0ID0gaW5wdXQoaysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBJRCBQb3N0IFRhcmdldCA6ICIpCgkJdHJ5OgoJCQlqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJCW9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIE5hbWUgOiAiK29wWyJuYW1lIl0pKQoJCWV4Y2VwdCBLZXlFcnJvcjoKCQkJcHJpbnQoKGsrIlsiK3ArIiEiK2srIl0iK3ArIiBJRCBOb3QgRm91bmQiKSkKCQkJcHJpbnQoKGsrIlxuWyAiK3ArIkJhY2siK2srIiBdIitwKSkKCQkJcHVibGlrKCkKCQlyPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9saWtlcz9saW1pdD0xMDAwMDAmYWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJaWQgPSBbXQoJCXo9anNvbi5sb2FkcyhyLnRleHQpCgkJcXEgPSAob3BbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCgkJeXMgPSBvcGVuKHFxICwgInciKSMucmVwbGFjZSgiICIsIl8iKQoJCWZvciBhIGluIHpbImRhdGEiXToKCQkJaWQuYXBwZW5kKGFbImlkIl0rIjw9PiIrYVsibmFtZSJdKQoJCQl5cy53cml0ZShhWyJpZCJdKyI8PT4iK2FbIm5hbWUiXSsiXG4iKQoJCXlzLmNsb3NlKCkKCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgVG90YWwgSUQgOiAlcyIlKGxlbihpZCkpKSkKCQlyZXR1cm4gcGlsaWhjcmFjayhxcSkKCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQlleGl0KGsrIlsiK3ArIiEiK2srIl0iK3ArIiBFcnJvciA6ICVzIiVlKQoKIyMjIENSQUNLIEVNQUlMICYgUEhPTkUgIyMjCgpkZWYgcmFuZG9tX251bWJlcnMoKToKICBkYXRhID0gW10KICBwcmludCgoaysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBOdW1iZXIgTXVzdCBCZSA1IERpZ2l0IikpCiAgcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEV4YW1wbGUgOiA5MjAzNyIpKQogIGtvZGU9c3RyKGlucHV0KGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIElucHV0IE51bWJlciA6ICIpKQogIGV4aXQoKGsrIlxuWyIrcCsiISIraysiXSIrcCsiIE51bWJlciBNdXN0IEJlIDUgRGlnaXQiKSkgaWYgbGVuKGtvZGUpIDwgNSBlbHNlICcnCiAgZXhpdCgoaysiXG5bIitwKyIhIitrKyJdIitwKyIgTnVtYmVyIE11c3QgQmUgNSBEaWdpdCIpKSBpZiBsZW4oa29kZSkgPiA1IGVsc2UgJycKICBqbWw9aW50KGlucHV0KGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEFtb3VudCA6ICIpKQogIFtkYXRhLmFwcGVuZCh7J3VzZXInOiBzdHIoZSksICdwdyc6W3N0cihlWzU6XSksIHN0cihlWzY6XSldfSkgZm9yIGUgaW4gW3N0cihrb2RlKSsnJy5qb2luKFsnJXMnJShyYW5kaW50KDAsOSkpIGZvciBpIGluIHJhbmdlKDAsNyldKSBmb3IgZSBpbiByYW5nZShqbWwpXV0KICBwcmludChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENyYWNrIFN0YXJ0ZWQsIFBsZWFzZSBXYWl0Li4uXG4iKQogIHdpdGggY29uY3VycmVudC5mdXR1cmVzLlRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0xNSkgYXMgdGg6CiAgICB7dGguc3VibWl0KGJydXRlLCB1c2VyWyd1c2VyJ10sIHVzZXJbJ3B3J10pOiB1c2VyIGZvciB1c2VyIGluIGRhdGF9CiAgaW5wdXQoaysiXG5bICIrcCsiQmFjayIraysiIF0iK3ApCiAgbWVudSgpCgpkZWYgcmFuZG9tX2VtYWlsKCk6CiAgZGF0YSA9IFtdCiAgbmFtYT1pbnB1dChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIFRhcmdldCBOYW1lIDogIikKICBkb21haW49aW5wdXQoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgQ2hvb3NlIERvbWFpbiBbR11tYWlsLCBbWV1haG9vLCBbSF1vdG1haWwgOiAiKS5sb3dlcigpLnN0cmlwKCkKICBsaXN0PXsKICAgICdnJzonQGdtYWlsLmNvbScsCiAgICAneSc6J0B5YWhvby5jb20nLAogICAgJ2gnOidAaG90bWFpbC5jb20nCiAgfQogIGV4aXQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEZpbGwgSW4gVGhlIENvcnJlY3QiKSkgaWYgbm90IGRvbWFpbiBpbiBbJ2cnLCd5JywnaCddIGVsc2UgJycKICBqbWw9aW50KGlucHV0KGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEFtb3VudCA6ICIpKQogIHNldHB3PWlucHV0KGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIFNldCBQYXNzd29yZCA6ICIpLnNwbGl0KCcsJykKICBwcmludChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENyYWNrIFN0YXJ0ZWQsIFBsZWFzZSBXYWl0Li4uXG4iKQogIFtkYXRhLmFwcGVuZCh7J3VzZXInOiBuYW1hK3N0cihlKStsaXN0W2RvbWFpbl0sICdwdyc6WyhpKSBmb3IgaSBpbiBzZXRwd119KSBmb3IgZSBpbiByYW5nZSgxLGptbCsxKV0KICB3aXRoIGNvbmN1cnJlbnQuZnV0dXJlcy5UaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MTUpIGFzIHRoOgogICAge3RoLnN1Ym1pdChicnV0ZSwgdXNlclsndXNlciddLCB1c2VyWydwdyddKTogdXNlciBmb3IgdXNlciBpbiBkYXRhfQogIGlucHV0KGsrIlxuWyAiK3ArIkJhY2siK2srIiBdIitwKQogIG1lbnUoKQoKZGVmIGJydXRlKHVzZXIsIHBhc3NzKToKICB0cnk6CiAgICBmb3IgcHcgaW4gcGFzc3M6CiAgICAgIHBhcmFtcz17CiAgICAgICAgJ2FjY2Vzc190b2tlbic6ICczNTA2ODU1MzE3MjglN0M2MmY4Y2U5Zjc0YjEyZjg0YzEyM2NjMjM0MzdhNGEzMicsCiAgICAgICAgJ2Zvcm1hdCc6ICdKU09OJywKICAgICAgICAnc2RrX3ZlcnNpb24nOiAnMicsCiAgICAgICAgJ2VtYWlsJzogdXNlciwKICAgICAgICAnbG9jYWxlJzogJ2VuX1VTJywKICAgICAgICAncGFzc3dvcmQnOiBwdywKICAgICAgICAnc2RrJzogJ2lvcycsCiAgICAgICAgJ2dlbmVyYXRlX3Nlc3Npb25fY29va2llcyc6ICcxJywKICAgICAgICAnc2lnJzogJzNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2JywKICAgICAgfQogICAgICBhcGk9J2h0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luJwogICAgICByZXNwb25zZT1yZXF1ZXN0cy5nZXQoYXBpLCBwYXJhbXM9cGFyYW1zKQogICAgICBpZiByZS5zZWFyY2goJyhFQUFBKVx3KycsIHN0cihyZXNwb25zZS50ZXh0KSk6CiAgICAgICAgcHJpbnQoJ1x4MWJbMDszMm1bXHgxYlswOzM3bUthY2hpLU9LXHgxYlswOzMybV0gJXMg4oCiICVzICclKHN0cih1c2VyKSwgc3RyKHB3KSkpCiAgICAgICAgYnJlYWsKICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcmVzcG9uc2UuanNvbigpWydlcnJvcl9tc2cnXToKICAgICAgICBwcmludCgnXHgxYlswOzMzbVtceDFiWzA7MzdtS2FjaGktQ1BceDFiWzA7MzNtXSAlcyDigKIgJXMgJyUoc3RyKHVzZXIpLCBzdHIocHcpKSkKICAgICAgICBicmVhawogIGV4Y2VwdDogcGFzcwoKIyMjIElORk8gQUNDT1VOVCAjIyMKCmRlZiB0YXJnZXQoKToKCXRyeToKCQl0b2tldD1vcGVuKCJsb2dpbi50eHQiLCJyIikucmVhZCgpCglleGNlcHQgSU9FcnJvcjoKCQlwcmludCgoaysiXG5bIitwKyIhIitrKyJdIitwKyIgVG9rZW4gSW52YWxpZCIpKQoJCW9zLnN5c3RlbSgicm0gLXJmIGxvZ2luLnR4dCIpCgkJbG9naW4oKQoJdHJ5OgoJCWlkdCA9IGlucHV0KGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgSUQgVGFyZ2V0ICAgICAgICA6ICIpCgkJdHJ5OgoJCQlqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJCW9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIE5hbWUgQWNjb3VudCAgICAgOiAiK29wWyJuYW1lIl0pKQoJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgVXNlcm5hbWUgICAgICAgICA6ICIrb3BbInVzZXJuYW1lIl0pKQoJCQl0cnk6CgkJCQlqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCgkJCQlvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgRW1haWwgICAgICAgICAgICA6ICIrb3BbImVtYWlsIl0pKQoJCQlleGNlcHQgS2V5RXJyb3I6CgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgRW1haWwgICAgICAgICAgICA6IC0iKSkKCQkJdHJ5OgoJCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQkJb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQoJCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIERhdGUgT2YgQmlydGggICAgOiAiK29wWyJiaXJ0aGRheSJdKSkKCQkJZXhjZXB0IEtleUVycm9yOgoJCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIERhdGUgT2YgQmlydGggICAgOiAtIikpCgkJCXRyeToKCQkJCWpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKCQkJCW9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKCQkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBHZW5kZXIgICAgICAgICAgIDogIitvcFsiZ2VuZGVyIl0pKQoJCQlleGNlcHQgS2V5RXJyb3I6CgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgR2VuZGVyICAgICAgICAgICA6IC0iKSkKCQkJdHJ5OgoJCQkJciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9mcmllbmRzP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQkJaWQgPSBbXQoJCQkJeiA9IGpzb24ubG9hZHMoci50ZXh0KQoJCQkJcXEgPSAob3BbImZpcnN0X25hbWUiXSsiLmpzb24iKS5yZXBsYWNlKCIgIiwiXyIpCgkJCQl5cyA9IG9wZW4ocXEgLCAidyIpCgkJCQlmb3IgaSBpbiB6WyJkYXRhIl06CgkJCQkJaWQuYXBwZW5kKGlbImlkIl0pCgkJCQkJeXMud3JpdGUoaVsiaWQiXSkKCQkJCXlzLmNsb3NlKCkKCQkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBUb3RhbCBGcmllbmQgICAgIDogJXMiJShsZW4oaWQpKSkpCgkJCWV4Y2VwdCBLZXlFcnJvcjoKCQkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBUb3RhbCBGcmllbmQgICAgIDogLSIpKQoJCQl0cnk6CgkJCQlhPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIi9zdWJzY3JpYmVycz9saW1pdD0yMDAwMCZhY2Nlc3NfdG9rZW49Iit0b2tldCkKCQkJCWlkID0gW10KCQkJCWIgPSBqc29uLmxvYWRzKGEudGV4dCkKCQkJCWJiID0gKG9wWyJmaXJzdF9uYW1lIl0rIi5qc29uIikucmVwbGFjZSgiICIsIl8iKQoJCQkJancgPSBvcGVuKGJiICwgInciKQoJCQkJZm9yIGMgaW4gYlsiZGF0YSJdOgoJCQkJCWlkLmFwcGVuZChjWyJpZCJdKQoJCQkJCWp3LndyaXRlKGNbImlkIl0pCgkJCQlqdy5jbG9zZSgpCgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgVG90YWwgRm9sbG93ZXIgICA6ICVzIiUobGVuKGlkKSkpKQoJCQlleGNlcHQgS2V5RXJyb3I6CgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgVG90YWwgRm9sbG93ZXIgICA6IC0iKSkKCQkJdHJ5OgoJCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQkJb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQoJCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIFdlYnNpdGUgICAgICAgICAgOiAiK29wWyJ3ZWJzaXRlIl0pKQoJCQlleGNlcHQgS2V5RXJyb3I6CgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgV2Vic2l0ZSAgICAgICAgICA6IC0iKSkKCQkJZXhjZXB0IElPRXJyb3I6CgkJCQlwcmludCgoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgV2Vic2l0ZSAgICAgICAgICA6IC0iKSkKCQkJdHJ5OgoJCQkJam9rID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQoJCQkJb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQoJCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIFVwZGF0ZSBUaW1lICAgICAgOiAiK29wWyJ1cGRhdGVkX3RpbWUiXSkpCgkJCWV4Y2VwdCBLZXlFcnJvcjoKCQkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBVcGRhdGUgVGltZSAgICAgIDogLSIpKQoJCQlleGNlcHQgSU9FcnJvcjoKCQkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBVcGRhdGUgVGltZSAgICAgIDogLSIpKQoJCQlpbnB1dChrKyJcblsgIitwKyJCYWNrIitrKyIgXSIrcCkKCQkJbWVudSgpCgkJZXhjZXB0IEtleUVycm9yOgoJCQlpbnB1dChrKyJcblsgIitwKyJCYWNrIitrKyIgXSIrcCkKCQkJbWVudSgpCglleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJZXhpdChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBFcnJvciA6ICVzIiVlKQoKIyMjIFBBU1NXT1JEICMjIwoKZGVmIGdlbmVyYXRlKHRleHQpOgoJcmVzdWx0cz1bXQoJZ2xvYmFsIGlwcwoJZm9yIGkgaW4gdGV4dC5zcGxpdCgiICIpOgoJCWlmIGxlbihpKTwzOgoJCQljb250aW51ZQoJCWVsc2U6CgkJCWk9aS5sb3dlcigpCgkJCWlmIGxlbihpKT09MyBvciBsZW4oaSk9PTQgb3IgbGVuKGkpPT01OgoJCQkJcmVzdWx0cy5hcHBlbmQoaSsiMTIzIikKCQkJCXJlc3VsdHMuYXBwZW5kKGkrIjEyMzQ1IikKCQkJZWxzZToKCQkJCXJlc3VsdHMuYXBwZW5kKGkrIjEyMyIpCgkJCQlyZXN1bHRzLmFwcGVuZChpKyIxMjM0NSIpCgkJCQlyZXN1bHRzLmFwcGVuZChpKQoJCQkJaWYgImluZG9uZXNpYSIgaW4gaXBzOgoJCQkJCXJlc3VsdHMuYXBwZW5kKCJzYXlhbmciKQoJCQkJCXJlc3VsdHMuYXBwZW5kKCJiaXNtaWxsYWgiKQoJCQkJCXJlc3VsdHMuYXBwZW5kKCJhbmppbmciKQoJCQkJCXJlc3VsdHMuYXBwZW5kKCIxMjM0NTYiKQoJcmV0dXJuIHJlc3VsdHMKCiMjIyBCUlVURSBDUkFDSyAjIyMKCmRlZiBtYmFzaWMoZW0scGFzLGhvc3RzKToKCXI9cmVxdWVzdHMuU2Vzc2lvbigpCglyLmhlYWRlcnMudXBkYXRlKHsiSG9zdCI6Im1iYXNpYy5mYWNlYm9vay5jb20iLCJjYWNoZS1jb250cm9sIjoibWF4LWFnZT0wIiwidXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyI6IjEiLCJ1c2VyLWFnZW50IjoiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzk0LjAuNDYwNi44MSBTYWZhcmkvNTM3LjM2IEVkZy85NC4wLjk5Mi41MCIsImFjY2VwdCI6InRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgiLCJhY2NlcHQtZW5jb2RpbmciOiJnemlwLCBkZWZsYXRlIiwiYWNjZXB0LWxhbmd1YWdlIjoiaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcifSkKCXA9ci5nZXQoImh0dHBzOi8vbWJhc2ljLmZhY2Vib29rLmNvbS8iKQoJYj1iczQuQmVhdXRpZnVsU291cChwLnRleHQsImh0bWwucGFyc2VyIikKCW1ldGE9IiIuam9pbihiczQucmUuZmluZGFsbCgnZHRzZyI6XHsidG9rZW4iOiIoLio/KSInLHAudGV4dCkpCglkYXRhPXt9Cglmb3IgaSBpbiBiKCJpbnB1dCIpOgoJCWlmIGkuZ2V0KCJ2YWx1ZSIpIGlzIE5vbmU6CgkJCWlmIGkuZ2V0KCJuYW1lIik9PSJlbWFpbCI6CgkJCQlkYXRhLnVwZGF0ZSh7ImVtYWlsIjplbX0pCgkJCWVsaWYgaS5nZXQoIm5hbWUiKT09InBhc3MiOgoJCQkJZGF0YS51cGRhdGUoeyJwYXNzIjpwYXN9KQoJCQllbHNlOgoJCQkJZGF0YS51cGRhdGUoe2kuZ2V0KCJuYW1lIik6IiJ9KQoJCWVsc2U6CgkJCWRhdGEudXBkYXRlKHtpLmdldCgibmFtZSIpOmkuZ2V0KCJ2YWx1ZSIpfSkKCWRhdGEudXBkYXRlKAoJCXsiZmJfZHRzZyI6bWV0YSwibV9zZXNzIjoiIiwiX191c2VyIjoiMCIsCgkJIl9fcmVxIjoiZCIsIl9fY3NyIjoiIiwiX19hIjoiIiwiX19keW4iOiIiLCJlbmNwYXNzIjoiIgoJCX0KCSkKCXIuaGVhZGVycy51cGRhdGUoeyJyZWZlcmVyIjoiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tL2xvZ2luLz9uZXh0JnJlZj1kYmwmZmwmcmVmaWQ9OCJ9KQoJcG89ci5wb3N0KCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9aHR0cHMlM0ElMkYlMkZtLmZhY2Vib29rLmNvbSUyRmxvZ2luJTJGJTNGcmVmJTNEZGJsJmx3dj0xMDAiLGRhdGE9ZGF0YSkudGV4dAoJaWYgImNfdXNlciIgaW4gbGlzdChyLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCkpOgoJCXJldHVybiB7InN0YXR1cyI6InN1Y2Nlc3MiLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6ci5jb29raWVzLmdldF9kaWN0KCl9CgllbGlmICJjaGVja3BvaW50IiBpbiBsaXN0KHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKSk6CgkJcmV0dXJuIHsic3RhdHVzIjoiY3AiLCJlbWFpbCI6ZW0sInBhc3MiOnBhcywiY29va2llcyI6ci5jb29raWVzLmdldF9kaWN0KCl9CgllbHNlOnJldHVybiB7InN0YXR1cyI6ImVycm9yIiwiZW1haWwiOmVtLCJwYXNzIjpwYXN9CgpjbGFzcyBjcmFjazoKCW9zLnN5c3RlbSgiY2xlYXIiKQoJYmFubmVyKCkKCWRlZiBfX2luaXRfXyhzZWxmLGlzaWZpbGUpOgoJCXNlbGYuYWRhPVtdCgkJc2VsZi5jcD1bXQoJCXNlbGYua289MAoJCXByaW50KChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENyYWNrIFdpdGggUGFzcyBEZWZhdWx0L01hbnVhbCBbZC9tXSIpKQoJCXdoaWxlIFRydWU6CgkJCWY9aW5wdXQoaysiWyIrcCsi4oCiIitrKyJdIitwKyIgQ2hvb3NlIDogIikKCQkJaWYgZj09IiI6Y29udGludWUKCQkJZWxpZiBmPT0ibSI6CgkJCQl0cnk6CgkJCQkJd2hpbGUgVHJ1ZToKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJCQkJCQlicmVhawoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQkJCWNvbnRpbnVlCgkJCQkJc2VsZi5mbD1bXQoJCQkJCWZvciBpIGluIHNlbGYuZnM6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdfSkKCQkJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQkJY29udGludWUKCQkJCXByaW50KChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBFeGFtcGxlIDogc2F5YW5nLGJpc21pbGxhaCwxMjM0NTYiKSkKCQkJCXNlbGYucHdsaXN0KCkKCQkJCWJyZWFrCgkJCWVsaWYgZj09ImQiOgoJCQkJdHJ5OgoJCQkJCXdoaWxlIFRydWU6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuYXBrPWlzaWZpbGUKCQkJCQkJCXNlbGYuZnM9b3BlbihzZWxmLmFwaykucmVhZCgpLnNwbGl0bGluZXMoKQoJCQkJCQkJYnJlYWsKCQkJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQkJCQljb250aW51ZQoJCQkJCXNlbGYuZmw9W10KCQkJCQlmb3IgaSBpbiBzZWxmLmZzOgoJCQkJCQl0cnk6CgkJCQkJCQlzZWxmLmZsLmFwcGVuZCh7ImlkIjppLnNwbGl0KCI8PT4iKVswXSwicHciOmdlbmVyYXRlKGkuc3BsaXQoIjw9PiIpWzFdKX0pCgkJCQkJCWV4Y2VwdDpjb250aW51ZQoJCQkJZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgoJCQkJCXByaW50KCgiICAgJXMiJWUpKQoJCQkJcHJpbnQoKGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgQ3JhY2sgU3RhcnRlZC4uLiIraysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBBY2NvdW50IFtLYWNoaS1PS10gU2F2ZWQgdG8gOiBLYWNoaS1PSy50eHQiK2srIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgQWNjb3VudCBbS2FjaGktQ1BdIFNhdmVkIHRvIDogS2FjaGktQ1AudHh0XG4iKSkKCQkJCVRocmVhZFBvb2woMzUpLm1hcChzZWxmLm1haW4sc2VsZi5mbCkKCQkJCW9zLnJlbW92ZShzZWxmLmFwaykKCQkJCWV4aXQoKQoJCQkJYnJlYWsKCWRlZiBwd2xpc3Qoc2VsZik6CgkJc2VsZi5wdz1pbnB1dChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBQYXNzd29yZCBMaXN0IDogIikuc3BsaXQoIiwiKQoJCWlmIGxlbihzZWxmLnB3KSA9PTA6CgkJCXNlbGYucHdsaXN0KCkKCQllbHNlOgoJCQlmb3IgaSBpbiBzZWxmLmZsOgoJCQkJaS51cGRhdGUoeyJwdyI6c2VsZi5wd30pCgkJCXByaW50KChrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIENyYWNrIFN0YXJ0ZWQuLi4iK2srIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgQWNjb3VudCBbS2FjaGktT0tdIFNhdmVkIHRvIDogS2FjaGktT0sudHh0IitrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIEFjY291bnQgW0thY2hpLUNQXSBTYXZlZCB0byA6IEthY2hpLUNQLnR4dFxuIikpCgkJCVRocmVhZFBvb2woMzApLm1hcChzZWxmLm1haW4sc2VsZi5mbCkKCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQoJCQlleGl0KCkKCWRlZiBtYWluKHNlbGYsZmwpOgoJCXRyeToKCQkJZm9yIGkgaW4gZmwuZ2V0KCJwdyIpOgoJCQkJbG9nPW1iYXNpYyhmbC5nZXQoImlkIiksCgkJCQkJaSwiaHR0cHM6Ly9tYmFzaWMuZmFjZWJvb2suY29tIikKCQkJCWlmIGxvZy5nZXQoInN0YXR1cyIpPT0iY3AiOgoJCQkJCXByaW50KCgiXHJceDFiWzA7MzNtW1x4MWJbMDszN21LYWNoaS1DUFx4MWJbMDszM21dICVzIOKAoiAlcyAgICAgICAgICAgICAgICIlKGZsLmdldCgiaWQiKSxpKSkpCgkJCQkJc2VsZi5jcC5hcHBlbmQoIiVzIOKAoiAlcyIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlvcGVuKCJLYWNoaS1DUC50eHQiLCJhKyIpLndyaXRlKAoJCQkJCQkiJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSkpCgkJCQkJYnJlYWsKCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoKCQkJCQlwcmludCgoIlxyXHgxYlswOzMybVtceDFiWzA7MzdtS2FjaGktT0tceDFiWzA7MzJtXSAlcyDigKIgJXMgICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSkpKQoJCQkJCXNlbGYuYWRhLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQoJCQkJCW9wZW4oIkthY2hpLU9LLnR4dCIsImErIikud3JpdGUoCgkJCQkJCSIlcyDigKIgJXNcbiIlKGZsLmdldCgiaWQiKSxpKSkKCQkJCQlicmVhawoJCQkJZWxzZTpjb250aW51ZQoJCQkJCQoJCQlzZWxmLmtvKz0xCgkJCXByaW50KCJcclx4MWJbMDszM21bXHgxYlswOzM3bUNyYWNrXHgxYlswOzMzbV1ceDFiWzA7MzdtICVzLyVzIFx4MWJbMDszMm1bXHgxYlswOzM3bUthY2hpLU9LIDogJXNceDFiWzA7MzJtXSBceDFiWzA7MzNtW1x4MWJbMDszN21LYWNoaS1DUCA6ICVzXHgxYlswOzMzbV1ceDFiWzA7MzdtIiUoc2VsZi5rbyxsZW4oc2VsZi5mbCksbGVuKHNlbGYuYWRhKSxsZW4oc2VsZi5jcCkpLCBlbmQ9JyAnKTtzeXMuc3Rkb3V0LmZsdXNoKCkKCQlleGNlcHQ6CgkJCXNlbGYubWFpbihmbCkKCmNsYXNzIGNyYWNrdHRsOgoJb3Muc3lzdGVtKCJjbGVhciIpCgliYW5uZXIoKQoJZGVmIF9faW5pdF9fKHNlbGYsaXNpZmlsZSk6CgkJc2VsZi5hZGE9W10KCQlzZWxmLmNwPVtdCgkJc2VsZi5rbz0wCgkJcHJpbnQoKGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgQ3JhY2sgV2l0aCBQYXNzIERlZmF1bHQvTWFudWFsIFtkL21dIikpCgkJd2hpbGUgVHJ1ZToKCQkJZj1pbnB1dChrKyJbIitwKyLigKIiK2srIl0iK3ArIiBDaG9vc2UgOiAiKQoJCQlpZiBmPT0iIjpjb250aW51ZQoJCQllbGlmIGY9PSJtIjoKCQkJCXRyeToKCQkJCQl3aGlsZSBUcnVlOgoJCQkJCQl0cnk6CgkJCQkJCQlzZWxmLmFwaz1pc2lmaWxlCgkJCQkJCQlzZWxmLmZzPW9wZW4oc2VsZi5hcGspLnJlYWQoKS5zcGxpdGxpbmVzKCkKCQkJCQkJCWJyZWFrCgkJCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQkJCQkJCXByaW50KCgiICAgJXMiJWUpKQoJCQkJCQkJY29udGludWUKCQkJCQlzZWxmLmZsPVtdCgkJCQkJZm9yIGkgaW4gc2VsZi5mczoKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5mbC5hcHBlbmQoeyJpZCI6aS5zcGxpdCgiPD0+IilbMF19KQoJCQkJCQlleGNlcHQ6Y29udGludWUKCQkJCWV4Y2VwdCBFeGNlcHRpb24gYXMgZToKCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQljb250aW51ZQoJCQkJcHJpbnQoKGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIEV4YW1wbGUgOiBzYXlhbmcsYmlzbWlsbGFoLDEyMzQ1NiIpKQoJCQkJc2VsZi5wd2xpc3QoKQoJCQkJYnJlYWsKCQkJZWxpZiBmPT0iZCI6CgkJCQl0cnk6CgkJCQkJd2hpbGUgVHJ1ZToKCQkJCQkJdHJ5OgoJCQkJCQkJc2VsZi5hcGs9aXNpZmlsZQoJCQkJCQkJc2VsZi5mcz1vcGVuKHNlbGYuYXBrKS5yZWFkKCkuc3BsaXRsaW5lcygpCgkJCQkJCQlicmVhawoJCQkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJCQlwcmludCgoIiAgICVzIiVlKSkKCQkJCQkJCWNvbnRpbnVlCgkJCQkJc2VsZi5mbD1bXQoJCQkJCWZvciBpIGluIHNlbGYuZnM6CgkJCQkJCXRyeToKCQkJCQkJCXNlbGYuZmwuYXBwZW5kKHsiaWQiOmkuc3BsaXQoIjw9PiIpWzBdLCJwdyI6Z2VuZXJhdGUoaS5zcGxpdCgiPD0+IilbMV0pfSkKCQkJCQkJZXhjZXB0OmNvbnRpbnVlCgkJCQlleGNlcHQgRXhjZXB0aW9uIGFzIGU6CgkJCQkJcHJpbnQoKCIgICAlcyIlZSkpCgkJCQlwcmludCgoaysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBDcmFjayBTdGFydGVkLi4uIitrKyJcblsiK3ArIuKAoiIraysiXSIrcCsiIEFjY291bnQgW0thY2hpLU9LXSBTYXZlZCB0byA6IEthY2hpLU9LLnR4dCIraysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBBY2NvdW50IFtLYWNoaS1DUF0gU2F2ZWQgdG8gOiBLYWNoaS1DUC50eHRcbiIpKQoJCQkJVGhyZWFkUG9vbCgzNSkubWFwKHNlbGYubWFpbixzZWxmLmZsKQoJCQkJb3MucmVtb3ZlKHNlbGYuYXBrKQoJCQkJZXhpdCgpCgkJCQlicmVhawoJZGVmIHB3bGlzdChzZWxmKToKCQlzZWxmLnB3PWlucHV0KGsrIlsiK3ArIuKAoiIraysiXSIrcCsiIFBhc3N3b3JkIExpc3QgOiAiKS5zcGxpdCgiLCIpCgkJaWYgbGVuKHNlbGYucHcpID09MDoKCQkJc2VsZi5wd2xpc3QoKQoJCWVsc2U6CgkJCWZvciBpIGluIHNlbGYuZmw6CgkJCQlpLnVwZGF0ZSh7InB3IjpzZWxmLnB3fSkKCQkJcHJpbnQoKGsrIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgQ3JhY2sgU3RhcnRlZC4uLiIraysiXG5bIitwKyLigKIiK2srIl0iK3ArIiBBY2NvdW50IFtLYWNoaS1PS10gU2F2ZWQgdG8gOiBLYWNoaS1PSy50eHQiK2srIlxuWyIrcCsi4oCiIitrKyJdIitwKyIgQWNjb3VudCBbS2FjaGktQ1BdIFNhdmVkIHRvIDogS2FjaGktQ1AudHh0XG4iKSkKCQkJVGhyZWFkUG9vbCgzMCkubWFwKHNlbGYubWFpbixzZWxmLmZsKQoJCQlvcy5yZW1vdmUoc2VsZi5hcGspCgkJCWV4aXQoKQoJZGVmIG1haW4oc2VsZixmbCk6CgkJdHJ5OgoJCQlmb3IgaSBpbiBmbC5nZXQoInB3Iik6CgkJCQlsb2c9bWJhc2ljKGZsLmdldCgiaWQiKSwKCQkJCQlpLCJodHRwczovL21iYXNpYy5mYWNlYm9vay5jb20iKQoJCQkJaWYgbG9nLmdldCgic3RhdHVzIik9PSJjcCI6CgkJCQkJdHJ5OgoJCQkJCQlrZT1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrZmwuZ2V0KCJpZCIpKyI/YWNjZXNzX3Rva2VuPSIrb3BlbigibG9naW4udHh0IiwiciIpLnJlYWQoKSkKCQkJCQkJdHQ9anNvbi5sb2FkcyhrZS50ZXh0KQoJCQkJCQl0dGw9dHRbImJpcnRoZGF5Il0KCQkJCQlleGNlcHQ6cGFzcwoJCQkJCXByaW50KCgiXHJceDFiWzA7MzNtW1x4MWJbMDszN21LYWNoaS1DUFx4MWJbMDszM21dICVzIOKAoiAlcyDigKIgJXNceDFiWzBtICAgIiUoZmwuZ2V0KCJpZCIpLGksc3RyKHR0bCkpKSkKCQkJCQlzZWxmLmNwLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQoJCQkJCW9wZW4oIkthY2hpLUNQLnR4dCIsImErIikud3JpdGUoCgkJCQkJCSIlcyDigKIgJXMg4oCiICVzXG4iJShmbC5nZXQoImlkIiksaSxzdHIodHRsKSkpCgkJCQkJYnJlYWsKCQkJCWVsaWYgbG9nLmdldCgic3RhdHVzIik9PSJzdWNjZXNzIjoKCQkJCQlwcmludCgoIlxyXHgxYlswOzMybVtceDFiWzA7MzdtS2FjaGktT0tceDFiWzA7MzJtXSAlcyDigKIgJXMgICAgICAgICAgICAgICAiJShmbC5nZXQoImlkIiksaSkpKQoJCQkJCXNlbGYuYWRhLmFwcGVuZCgiJXMg4oCiICVzIiUoZmwuZ2V0KCJpZCIpLGkpKQoJCQkJCWlmIGZsLmdldCgiaWQiKSBpbiBvcGVuKCJLYWNoaS1PSy50eHQiKS5yZWFkKCk6CgkJCQkJCWJyZWFrCgkJCQkJZWxzZToKCQkJCQkJb3BlbigiS2FjaGktT0sudHh0IiwiYSsiKS53cml0ZSgKCQkJCQkJIiVzIOKAoiAlc1xuIiUoZmwuZ2V0KCJpZCIpLGkpKQoJCQkJCWJyZWFrCgkJCQllbHNlOmNvbnRpbnVlCgkJCQkJCgkJCXNlbGYua28rPTEKCQkJcHJpbnQoIlxyXHgxYlswOzMzbVtceDFiWzA7MzdtQ3JhY2tceDFiWzA7MzNtXVx4MWJbMDszN20gJXMvJXMgXHgxYlswOzMybVtceDFiWzA7MzdtS2FjaGktT0sgOiAlc1x4MWJbMDszMm1dIFx4MWJbMDszM21bXHgxYlswOzM3bUthY2hpLUNQIDogJXNceDFiWzA7MzNtXVx4MWJbMDszN20iJShzZWxmLmtvLGxlbihzZWxmLmZsKSxsZW4oc2VsZi5hZGEpLGxlbihzZWxmLmNwKSksIGVuZD0nICcpO3N5cy5zdGRvdXQuZmx1c2goKQoJCWV4Y2VwdDoKCQkJc2VsZi5tYWluKGZsKQoKIyMjIFJFU1VMVCAjIyMKCmRlZiByZXN1bHRzKERhcHVudGEsS3JhaGtyYWgpOgogICAgICAgIGlmIGxlbihEYXB1bnRhKSAhPTA6CiAgICAgICAgICAgICAgICBwcmludCgoIltPS10gOiAiK3N0cihsZW4oRGFwdW50YSkpKSkKICAgICAgICBpZiBsZW4oS3JhaGtyYWgpICE9MDoKICAgICAgICAgICAgICAgIHByaW50KCgiW0NQXSA6ICIrc3RyKGxlbihLcmFoa3JhaCkpKSkKICAgICAgICBpZiBsZW4oRGFwdW50YSkgPT0wIGFuZCBsZW4oS3JhaGtyYWgpID09MDoKICAgICAgICAgICAgICAgIHByaW50KCJcbiIpCiAgICAgICAgICAgICAgICBwcmludCgoaysiWyIrcCsiISIraysiXSIrcCsiIE5vIFJlc3VsdCBGb3VuZCIpKQoKZGVmIHJlc3MoKToKICAgIG9zLnN5c3RlbSgiY2xlYXIiKQogICAgYmFubmVyKCkKICAgIHByaW50KChrKyJcblsgIitwKyJSZXN1bHQgQ3JhY2siK2srIiBdIitwKSkKICAgIHByaW50KChrKyJcblsgIitwKyJPSyIraysiIF0iK3ApKQogICAgdHJ5OgogICAgICAgIG9zLnN5c3RlbSgiY2F0IEthY2hpLU9LLnR4dCIpCiAgICBleGNlcHQgSU9FcnJvcjoKICAgICAgICBwcmludCgoaysiWyIrcCsiISIraysiXSIrcCsiIE5vIFJlc3VsdCBGb3VuZCIpKQogICAgcHJpbnQoKGsrIlxuWyAiK3ArIkNQIitrKyIgXSIrcCkpCiAgICB0cnk6CiAgICAgICAgb3Muc3lzdGVtKCJjYXQgS2FjaGktQ1AudHh0IikKICAgIGV4Y2VwdCBJT0Vycm9yOgogICAgICAgIHByaW50KChrKyJbIitwKyIhIitrKyJdIitwKyIgTm8gUmVzdWx0IEZvdW5kIikpCiAgICBpbnB1dChrKyJcblsgIitwKyJCYWNrIitrKyIgXSIrcCkKICAgIG1lbnUoKQoKaWYgX19uYW1lX189PSJfX21haW5fXyI6Cglvcy5zeXN0ZW0oImdpdCBwdWxsIikKCW1lbnUoKQo="))